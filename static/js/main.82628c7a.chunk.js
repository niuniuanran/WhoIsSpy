(this["webpackJsonpwho-is-spy"]=this["webpackJsonpwho-is-spy"]||[]).push([[0],{113:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(12),r=n.n(o),i=(n(113),n(27)),s=n(15),l=n(178),d=n(180),j=n(175),u=n(1),b=Object(j.a)((function(e){return{option:{height:"5rem",width:"15rem",fontSize:"1.5rem"},iconSpan:{fontSize:"2rem",paddingRight:"1rem"}}}));function m(e){var t=e.text,n=e.path,a=e.icon,c=b(),o=Object(s.f)();return Object(u.jsx)(l.a,{item:!0,xs:12,children:Object(u.jsxs)(d.a,{variant:"contained",size:"large",color:"primary",className:c.option,onClick:function(){o.push(n)},children:[Object(u.jsx)("span",{className:c.iconSpan,children:a}),Object(u.jsx)("span",{children:t})]})})}var h=n(75),O=n.n(h),x=c.a.createContext(void 0);function p(e){var t=e.language,n=e.children,a={newRoom:{en:"New room",cn:"\u65b0\u5efa\u623f\u95f4"},joinRoom:{en:"Join room",cn:"\u52a0\u5165\u623f\u95f4"},addWords:{en:"Contribute",cn:"\u8d21\u732e\u8bcd\u6761"},randomBlank:{en:"Spy can be blank",cn:"\u5367\u5e95\u53ef\u4ee5\u662f\u767d\u677f"},eighteenPlus:{en:"Allow 18+ words",cn:"\u5141\u8bb8\u6210\u4eba\u8bcd\u6c47"},back:{en:"Back",cn:"\u8fd4\u56de"},spyPlural:{en:"spies",cn:"\u4e2a\u5367\u5e95"},spySingular:{en:"spy",cn:"\u4e2a\u5367\u5e95"},total:{en:"total",cn:"\u4e2a\u73a9\u5bb6"},roomCode:{en:"Room code",cn:"\u623f\u95f4\u53f7"},enRoom:{en:"Room in English",cn:"\u82f1\u6587\u623f\u95f4"},cnRoom:{en:"Room in Chinese",cn:"\u4e2d\u6587\u623f\u95f4"},enterRoom:{en:"Enter room",cn:"\u8fdb\u5165\u623f\u95f4"},roomFull:{en:"Room is full",cn:"\u623f\u95f4\u5df2\u6ee1"},createRoom:{en:"Create room",cn:"\u521b\u5efa\u623f\u95f4"},ok:{en:"OK",cn:"\u786e\u8ba4"},youNickname:{en:"Your nickname",cn:"\u4f60\u7684\u6635\u79f0"},exit:{en:"Exit",cn:"\u9000\u51fa"},findRoom:{en:"Find room",cn:"\u67e5\u627e\u623f\u95f4"},failJoinRoom:{en:"Failed to join room",cn:"\u52a0\u5165\u623f\u95f4\u5931\u8d25"},changeWord:{en:"Change words",cn:"\u6362\u8bcd"},backToHomepage:{en:"Back to homepage",cn:"\u8fd4\u56de\u4e3b\u9875"},youLookDisconnected:{en:"You look disconnected...",cn:"\u4f60\u597d\u50cf\u6389\u7ebf\u4e86\ud83e\udd14"},waitingVote:{en:"Waiting for other players to vote",cn:"\u6b63\u5728\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u6295\u7968"},you:{en:"you",cn:"\u4f60"},imReady:{en:"I'm ready",cn:"\u51c6\u5907"},notReady:{en:"I'm not ready",cn:"\u6ca1\u51c6\u5907\u597d"},gameStarting:{en:"Game starting...",cn:"\u6e38\u620f\u5373\u5c06\u5f00\u59cb..."},ready:{en:"ready",cn:"\u51c6\u5907"},reading:{en:"reading",cn:"\u8bfb\u8bcd\u4e2d"},listening:{en:"",cn:""},talking:{en:"talking",cn:"\u53d1\u8a00\u4e2d"},voting:{en:"voting",cn:"\u6295\u7968\u4e2d"},killed:{en:"killed",cn:"\u88ab\u6740"},win:{en:"win",cn:"\u80dc\u5229"},lose:{en:"lose",cn:"\u5931\u8d25"},voted:{en:"voted",cn:"\u5df2\u6295\u7968"},wordChanging:{en:"",cn:""},offline:{en:"offline",cn:"\u6389\u7ebf"},yourWord:{en:"Your word:",cn:"\u4f60\u7684\u8bcd\u662f\uff1a"},gotIt:{en:"Got it",cn:"\u597d\u7684"},seeWord:{en:"See word",cn:"\u663e\u793a\u8bcd\u8bed"},pleaseVote:{en:"Please vote",cn:"\u8bf7\u6295\u7968"},submitVote:{en:"Vote",cn:"\u63d0\u4ea4"},noAlivePlayers:{en:"No alive players in room",cn:"\u5df2\u6ca1\u6709\u5b58\u6d3b\u73a9\u5bb6"},gotTies:{en:"Got ties. Please continue to vote",cn:"\u5e73\u7968\uff0c\u8bf7\u7ee7\u7eed\u6295\u7968"},goodWin:{en:"No spies left. Good people win!",cn:"\u5367\u5e95\u5168\u90e8\u6b7b\u4ea1\uff0c\u597d\u4eba\u80dc\u5229\uff01"}},c={room:{en:function(e){return"Room ".concat(e)},cn:function(e){return"".concat(e," \u623f\u95f4")}},isReady:{en:function(e){return"".concat(e," is ready")},cn:function(e){return"\u73a9\u5bb6 ".concat(e," \u51c6\u5907")}},isNotReady:{en:function(e){return"".concat(e," is not ready")},cn:function(e){return"\u73a9\u5bb6 ".concat(e," \u64a4\u9500\u51c6\u5907")}},appearAway:{en:function(e){return"".concat(e," appears away")},cn:function(e){return"\u73a9\u5bb6 ".concat(e," \u6389\u7ebf")}},turnToTalk:{en:function(e){return"".concat(e,"'s turn to talk")},cn:function(e){return"\u73a9\u5bb6 ".concat(e," \u8bf7\u53d1\u8a00")}},isKilled:{en:function(e){return"".concat(e," is killed")},cn:function(e){return"\u73a9\u5bb6 ".concat(e," \u88ab\u6740")}},spiesWin:{en:function(e){return"Only ".concat(e," good people left. Spies win!")},cn:function(e){return"\u4ec5\u5269".concat(e,"\u540d\u597d\u4eba\uff0c\u5367\u5e95\u80dc\u5229\uff01")}},requestChangeWord:{en:function(e){return"".concat(e," requested to change word")},cn:function(e){return"\u73a9\u5bb6 ".concat(e," \u8981\u6c42\u6362\u8bcd")}},joined:{en:function(e){return"".concat(e," joined the room")},cn:function(e){return"".concat(e," \u52a0\u5165\u4e86\u623f\u95f4")}},left:{en:function(e){return"".concat(e," left the room")},cn:function(e){return"".concat(e," \u79bb\u5f00\u4e86\u623f\u95f4")}}};return Object(u.jsx)(x.Provider,{value:{language:t,getText:function(e,n){return n&&c[e][t](n)||a[e][t]},getCurrentLanguage:function(){return t}},children:n})}var g=Object(j.a)((function(e){return{root:{flexGrow:1,textAlign:"center",margin:0,padding:"2rem",width:"100vw",height:"100vh",boxSizing:"border-box",color:e.palette.text.secondary,backgroundColor:"#121212"},content:{height:"60%",width:"100%",margin:e.spacing(0,"auto"),position:"absolute",top:"50%",left:"50%",msTransform:"translateY(-50%) translateX(-50%)",transform:"translateY(-50%) translateX(-50%)"},back:{position:"absolute",left:"-2rem",top:"-6rem"}}}));function f(e){var t=e.children,n=e.allowBack,c=e.allowExit,o=e.onExit,r=Object(s.f)(),i=g(),j=Object(a.useContext)(x);return n?Object(u.jsx)("div",{className:i.root,children:Object(u.jsx)(l.a,{container:!0,children:Object(u.jsxs)(l.a,{item:!0,xs:9,md:4,className:i.content,children:[Object(u.jsx)("div",{className:i.back,children:Object(u.jsxs)(d.a,{size:"large","aria-label":"back",color:"primary",variant:"text",style:{fontWeight:"bolder"},onClick:function(){return r.goBack()},children:[Object(u.jsx)(O.a,{})," ",j&&j.getText("back")]})}),t]})})}):c?Object(u.jsx)("div",{className:i.root,children:Object(u.jsx)(l.a,{container:!0,children:Object(u.jsxs)(l.a,{item:!0,xs:9,md:4,className:i.content,children:[Object(u.jsx)("div",{className:i.back,children:Object(u.jsxs)(d.a,{size:"large","aria-label":"back",color:"primary",variant:"text",style:{fontWeight:"bolder"},onClick:function(){o&&o(),r.push("/".concat(null===j||void 0===j?void 0:j.getCurrentLanguage()))},children:[Object(u.jsx)(O.a,{})," ",null===j||void 0===j?void 0:j.getText("exit")]})}),t]})})}):Object(u.jsx)("div",{className:i.root,children:Object(u.jsx)(l.a,{container:!0,children:Object(u.jsx)(l.a,{item:!0,xs:9,md:6,className:i.content,children:t})})})}function v(){return Object(u.jsx)(f,{children:Object(u.jsxs)(l.a,{container:!0,spacing:5,children:[Object(u.jsx)(m,{path:"/en",text:"English"}),Object(u.jsx)(m,{path:"/cn",text:"\u4e2d\u6587"})]})})}var y=n(16),k=n(9),w=n(146),C=n(182),N=n(196),S=n(5),R=n(198),T=Object(S.a)({root:{position:"absolute",width:"50%",left:"50%",top:"1rem"},track:{height:6},thumb:{height:"1rem",width:"1rem",border:"1px solid currentColor"},rail:{height:6,opacity:1,backgroundColor:"rgba(63, 81, 181, 0.38)","&::after":{content:'""',height:"6px",width:"100%",position:"absolute",bottom:"0px",top:"0px",left:"-100%",backgroundColor:"currentColor"}},valueLabel:{top:-46,left:"calc(-50% - 8px)","& *":{width:"2.8rem",height:"2.8rem"},"& span span":{width:"1.7rem",fontSize:"0.8rem",marginTop:"0.6rem",marginLeft:"-0.6rem"}}})(R.a),L=Object(S.a)({root:{position:"absolute",width:"30%",left:"10%",top:"1rem"},track:{height:6},rail:{backgroundColor:"rgba(0, 0, 0, 0)",opacity:1,height:0,"&::after":{content:'""',height:"6px",width:"33.33%",position:"absolute",bottom:"0px",top:"0px",left:"-33.33%",backgroundColor:"currentColor"}},thumb:{height:"1rem",width:"1rem",border:"1px solid currentColor"},mark:{color:"#424242",opacity:.8},valueLabel:{top:-46,left:"calc(-50% - 8px)","& *":{width:"2.8rem",height:"2.8rem"},"& span span":{width:"1.7rem",fontSize:"0.8rem",marginTop:"0.5rem",marginLeft:"-0.6rem"}}})(R.a),z=Object(j.a)((function(e){return{root:{position:"relative",width:"100%",height:"5rem",marginTop:"1rem"}}}));function B(e){var t=e.roomSettings,n=e.setRoomSettings,c=Object(a.useContext)(x).getText,o=z();return Object(u.jsxs)("div",{className:o.root,children:[Object(u.jsx)(T,{value:t.numPlayer,onChange:function(e,a){n(Object(y.a)(Object(y.a)({},t),{},{numPlayer:a}))},defaultValue:6,getAriaValueText:function(e){return"".concat(e," players")},"aria-labelledby":"number-of-players",step:1,min:5,max:10,marks:!0,valueLabelDisplay:"on",valueLabelFormat:function(e){return"".concat(e," ").concat(c("total"))}}),Object(u.jsx)(L,{value:t.numSpy,onChange:function(e,a){n(Object(y.a)(Object(y.a)({},t),{},{numSpy:a}))},defaultValue:2,getAriaValueText:function(e){return"".concat(e," ").concat(c("spyPlural"))},"aria-labelledby":"number-of-spys",step:1,min:1,max:4,valueLabelDisplay:"on",color:"secondary",marks:!0,valueLabelFormat:function(e){return"".concat(e," ").concat(c(e>1?"spyPlural":"spySingular"))}})]})}var P=n(44),I=n(41),J=n(145),W=n(181),E=n(67),A=n.n(E),F=Object(j.a)((function(e){return{codeDisplay:Object(I.a)({},e.breakpoints.up("md"),{width:"80%",margin:"0 auto"}),skeleton:{margin:"0 auto"}}}));function D(e){var t=e.loading,n=e.code,c=e.capacity,o=e.currentPlayerNum,r=e.language,i=Object(a.useContext)(x).getText,j=F(),b=Object(s.f)();return Object(u.jsx)(f,{allowBack:!0,children:Object(u.jsxs)("div",{children:[Object(u.jsxs)(l.a,{container:!0,style:{marginBottom:"3rem"},className:j.codeDisplay,children:[Object(u.jsx)(l.a,{item:!0,xs:11,children:Object(u.jsxs)(J.a,{align:"left",paragraph:!0,variant:"h6",display:"block",style:{margin:"1rem 0 1rem 1rem"},children:[i("roomCode"),":"]})}),t||!n?Object(P.a)(Array(4)).map((function(e,t){return Object(u.jsx)(l.a,{item:!0,xs:3,children:Object(u.jsx)(W.a,{className:j.skeleton,animation:"wave",children:Object(u.jsx)(J.a,{variant:"h2",children:"1"})})},t)})):(n+"").split("").map((function(e,t){return Object(u.jsx)(l.a,{item:!0,xs:3,children:Object(u.jsx)(J.a,{variant:"h2",children:e})},t)}))]}),void 0!==o&&void 0!==c?Object(u.jsxs)("div",{children:[Object(P.a)(Array(o)).map((function(e,t){return Object(u.jsx)(A.a,{color:"primary"},t)})),Object(P.a)(Array(c-o)).map((function(e,t){return Object(u.jsx)(A.a,{color:"disabled"},t)}))]}):Object(u.jsx)(W.a,{className:j.skeleton,animation:"wave",children:Object(P.a)(Array(7)).map((function(e,t){return Object(u.jsx)(A.a,{color:"primary"},t)}))}),void 0!==r?Object(u.jsx)(J.a,{display:"block",variant:"caption",children:i("".concat(r,"Room"))}):Object(u.jsx)(W.a,{className:j.skeleton,animation:"wave",children:Object(u.jsx)(J.a,{children:"Room in English"})}),t||!n?Object(u.jsx)(W.a,{className:j.skeleton,animation:"wave",children:o<c?Object(u.jsx)(d.a,{size:"large",variant:"contained",color:"primary",style:{marginTop:"2rem"},children:i("enterRoom")}):Object(u.jsx)(d.a,{disabled:!0,size:"large",variant:"contained",color:"primary",style:{marginTop:"2rem"},children:i("roomFull")})}):Object(u.jsx)(d.a,{size:"large",variant:"contained",color:"primary",style:{marginTop:"2rem"},onClick:function(){b.push("/".concat(r,"/room/").concat(n,"/enter"))},children:i("enterRoom")})]})})}var V=n(37),G=n.n(V),Y=n(56),H=n(94),M=n.n(H),q=function(){var e=Object(Y.a)(G.a.mark((function e(t){var n,a,c,o,r,i,s,l;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,a=t.path,c=t.method,o=void 0===c?"POST":c,r=t.headers,i=void 0===r?{}:r,e.prev=1,e.next=4,M()({method:o,url:"http://".concat("34.221.65.76:8080","/").concat(a),headers:i,data:n});case 4:return s=e.sent,l=s.data,e.abrupt("return",l);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),K=Object(j.a)((function(e){return{formGroup:{width:"fit-content",margin:"1rem auto"},submitButton:{margin:"2rem 1rem 1rem 0"}}}));function X(){var e=K(),t=Object(a.useContext)(x),n=t.getText,c=t.getCurrentLanguage,o=Object(a.useState)(""),r=Object(k.a)(o,2),i=r[0],s=r[1],l=Object(a.useState)({numPlayer:6,numSpy:1,randomBlank:!0,eighteenPlus:!1,language:c()}),j=Object(k.a)(l,2),b=j[0],m=j[1],h=Object(a.useState)({loading:!1,code:void 0,capacity:6,currentPlayerNum:0,language:c(),eighteenPlus:!1}),O=Object(k.a)(h,2),p=O[0],g=O[1];return i?Object(u.jsx)("div",{children:"Error:"}):p.loading||void 0!==p.code?Object(u.jsx)(D,Object(y.a)({},p)):Object(u.jsx)(f,{allowBack:!0,children:Object(u.jsxs)("form",{children:[Object(u.jsx)(B,{roomSettings:b,setRoomSettings:m}),Object(u.jsxs)(w.a,{className:e.formGroup,children:[Object(u.jsx)(C.a,{control:Object(u.jsx)(N.a,{checked:b.randomBlank,onChange:function(e){return m((function(t){return Object(y.a)(Object(y.a)({},t),{},{randomBlank:e.target.checked})}))},name:"random-blank",color:"primary"}),label:n("randomBlank")}),Object(u.jsx)(C.a,{control:Object(u.jsx)(N.a,{checked:b.eighteenPlus,onChange:function(e){return m((function(t){return Object(y.a)(Object(y.a)({},t),{},{eighteenPlus:e.target.checked})}))},name:"eighteen-plus",color:"secondary"}),label:n("eighteenPlus")})]}),Object(u.jsx)(d.a,{className:e.submitButton,onClick:function(){g((function(e){return Object(y.a)(Object(y.a)({},e),{},{loading:!0})})),q({path:"create-room",payload:b}).then((function(e){g((function(){return Object(y.a)(Object(y.a)({},p),{},{loading:!1,code:e,capacity:b.numPlayer})}))})).catch((function(e){s(e)}))},size:"large",variant:"contained",color:"primary",children:n("createRoom")})]})})}var U=n(192),Q=n(184),Z=Object(j.a)((function(e){return{formGroup:{width:"fit-content",margin:"1rem auto"},submitButton:{margin:"1rem auto"}}}));function $(){var e=Object(a.useContext)(x).getText,t=Object(a.useState)(""),n=Object(k.a)(t,2),c=n[0],o=n[1],r=Object(a.useState)({loading:!1,code:void 0,capacity:5,currentPlayerNum:0,language:""}),i=Object(k.a)(r,2),s=i[0],l=i[1],j=Z();return s.code?Object(u.jsx)(D,Object(y.a)({},s)):Object(u.jsx)(f,{allowBack:!0,children:Object(u.jsxs)("form",{children:[Object(u.jsx)(w.a,{className:j.formGroup,children:Object(u.jsx)(U.a,{id:"room-code",label:e("roomCode"),variant:"outlined",color:"primary",value:c,autoFocus:!0,inputProps:{maxLength:4,minLength:4},onChange:function(e){o(e.target.value)}})}),s.loading?Object(u.jsx)(d.a,{className:j.submitButton,size:"large",variant:"contained",color:"primary",disabled:!0,children:Object(u.jsx)(Q.a,{})}):Object(u.jsx)(d.a,{className:j.submitButton,onClick:function(e){e.preventDefault(),l((function(e){return Object(y.a)(Object(y.a)({},e),{},{loading:!0})})),q({path:"find-room?code=".concat(c),payload:c,method:"GET"}).then((function(e){l(Object(y.a)(Object(y.a)({},e),{},{loading:!1}))}))},size:"large",variant:"contained",color:"primary",type:"submit",children:e("findRoom")})]})})}function _(){return Object(u.jsx)(f,{allowBack:!0,children:Object(u.jsx)("div",{children:"contribute"})})}var ee=n(96),te=n.n(ee),ne=n(95),ae=n.n(ne),ce=n(97),oe=n.n(ce);function re(){var e=Object(a.useContext)(x).getText,t=Object(s.h)();return Object(u.jsx)(f,{allowBack:!0,children:Object(u.jsxs)(l.a,{container:!0,spacing:5,children:[Object(u.jsx)(m,{text:e("newRoom"),icon:Object(u.jsx)(ae.a,{}),path:"".concat(t.path,"/new-room")}),Object(u.jsx)(m,{text:e("joinRoom"),icon:Object(u.jsx)(te.a,{}),path:"".concat(t.path,"/join-room")}),Object(u.jsx)(m,{text:e("addWords"),icon:Object(u.jsx)(oe.a,{}),path:"".concat(t.path,"/contribute")})]})})}var ie="player-left",se="player-joined",le="player-state",de="your-word",je="game-will-start",ue="please-vote",be="talk-finish",me="vote",he="player-ready",Oe="player-left",xe="player-undo-ready",pe="word-read",ge="result-received",fe="change-word",ve=n(193),ye=n(148),ke=n(199),we=n(197),Ce=Object(j.a)((function(e){return Object(we.a)({root:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},xlarge:{width:e.spacing(12),height:e.spacing(12),padding:e.spacing(1)},large:{width:e.spacing(7),height:e.spacing(7),padding:3},medium:{width:e.spacing(6),height:e.spacing(6),padding:4},small:{width:e.spacing(5),height:e.spacing(5)},xsmall:{width:e.spacing(4),height:e.spacing(4),padding:2},avatar:{backgroundColor:"#343434"}})}));function Ne(e){var t=e.nickname,n=e.size,c=e.className,o=e.stayLoading,r=void 0!==o&&o,i=Ce(),s=Object(a.useState)(""),l=Object(k.a)(s,2),d=l[0],j=l[1];return Object(u.jsxs)("div",{className:i.root,children:[Object(u.jsx)(ke.a,{alt:t,src:"https://avatars.dicebear.com/api/bottts/".concat(t,".svg"),className:"".concat(i.avatar," ").concat(i[n]," ").concat(c),onLoad:function(){t&&j(t)},style:d!==t||r?{display:"none"}:{display:"block"}}),Object(u.jsx)(W.a,{variant:"circle",animation:"wave",className:"".concat(i[n]),style:d!==t||r?{display:"block"}:{display:"none"}})]})}var Se=Object(j.a)((function(e){return{formGroup:{width:"fit-content",margin:"1rem auto"},submitButton:{margin:"1rem auto"}}}));function Re(){var e=Se(),t=Object(a.useContext)(x).getText,n=Object(a.useContext)(xt).setNickname,c=Object(a.useState)(""),o=Object(k.a)(c,2),r=o[0],i=o[1],l=Object(s.g)().code;return Object(a.useEffect)((function(){if(localStorage.getItem("roomCode")===l){var e=localStorage.getItem("nickname");e&&i(e),localStorage.clear()}}),[l]),Object(u.jsxs)("form",{autoComplete:"off",children:[Object(u.jsx)(Ne,{nickname:r,size:"xlarge"}),Object(u.jsx)(w.a,{className:e.formGroup,children:Object(u.jsx)(U.a,{id:"nickname",label:t("youNickname"),variant:"outlined",color:"primary",value:r,autoFocus:!0,inputProps:{maxLength:6,minLength:1},onInput:function(e){var t=e.target;i(t.value)},required:!0})}),Object(u.jsx)(d.a,{type:"submit",className:e.submitButton,onClick:function(e){e.preventDefault(),n(r)},size:"large",variant:"contained",color:"primary",children:t("ok")})]})}var Te=n(185),Le="",ze="ready",Be="reading",Pe="listening",Ie="talking",Je="voting",We="killed",Ee="win",Ae="lose",Fe="voted",De="wordChanging",Ve="offline",Ge=Object(j.a)((function(e){return{root:{marginTop:"1rem"},me:{backgroundColor:"#898989"},others:{backgroundColor:"#343434"},new:{backgroundColor:"#898989",width:"fit-content"},player:{backgroundColor:"inherit",width:"fit-content",borderRadius:"5px"},playerName:{textAlign:"center"},killed:{filter:"grayscale(100%)"},offline:{filter:"blur(3px)"}}}));function Ye(){var e=Ge(),t=Object(a.useContext)(xt),n=t.nickname,c=t.playersInRoom,o=t.roomCapacity,r=Object(a.useContext)(x).getText,i=(o||0)-((null===c||void 0===c?void 0:c.length)||0);return Object(u.jsxs)(l.a,{container:!0,spacing:1,className:e.root,children:[c&&c.sort((function(e,t){return e.serialNumber-t.serialNumber})).map((function(t,a){return Object(u.jsxs)(l.a,{xs:3,item:!0,className:"".concat(e.player," ").concat(a===c.length-1?e.new:""),children:[Object(u.jsx)(Te.a,{color:(o=t.state,o===Ie?"secondary":o===We||o===Ve?"default":"primary"),badgeContent:t.state?r(t.state):0,children:Object(u.jsx)(Ne,{nickname:t.nickname,size:"large",className:"".concat(t.nickname===n?e.me:e.others," ").concat(t.state===We&&e.killed," ").concat(t.state===Ve&&e.offline)})}),Object(u.jsx)(J.a,{className:e.playerName,children:n===t.nickname?"".concat(t.nickname," (").concat(r("you"),")"):t.nickname})]},a);var o})),i>0&&Object(P.a)(Array(i)).map((function(t,n){return Object(u.jsxs)(l.a,{xs:3,item:!0,className:e.player,children:[Object(u.jsx)(Ne,{size:"large",stayLoading:!0}),Object(u.jsx)(W.a,{width:50,height:23.64,style:{margin:"0 auto"},animation:"wave"})]},n)}))]})}var He=n(194),Me=n(68),qe=n.n(Me),Ke=Object(j.a)((function(e){return{root:{position:"fixed",top:"-3.5rem",left:0,right:0,width:"100%",height:"3em"}}}));function Xe(e){var t=e.alertLine,n=e.type,a=Ke();return Object(u.jsx)(He.a,{severity:n,className:a.root,iconMapping:{success:Object(u.jsx)(qe.a,{fontSize:"inherit"}),error:Object(u.jsx)(qe.a,{fontSize:"inherit"}),warning:Object(u.jsx)(qe.a,{fontSize:"inherit"})},children:t})}var Ue=n(99),Qe=n.n(Ue),Ze=n(186),$e=n(187),_e=n(188),et=n(189),tt=n(98),nt=n.n(tt),at=Object(j.a)((function(e){return{main:{width:"100%",height:"10rem",display:"flex",flexDirection:"column",alignItems:"flex-end",position:"absolute",top:"3rem",margin:"0 auto",zIndex:100},invisible:{width:"6rem",height:"4rem"},wordArea:{height:"7rem"},cardArea:{height:"100%"},side:{width:"7rem",height:"5rem",position:"absolute",bottom:"0",right:"0"}}}));function ct(e){var t=e.word,n=e.central,c=e.onRead,o=e.defaultHide,r=Object(a.useState)(!o),i=Object(k.a)(r,2),s=i[0],l=i[1],j=at(),b=Object(a.useContext)(x).getText,m=function(){l(!1),c()};return s?Object(u.jsxs)(Ze.a,{className:j.main,children:[Object(u.jsx)($e.a,{onClick:m,className:j.wordArea,children:Object(u.jsxs)(_e.a,{children:[Object(u.jsx)(J.a,{variant:"caption",component:"h1",style:{textAlign:"left",paddingLeft:"1em"},children:b("yourWord")}),Object(u.jsx)(J.a,{variant:"h4",component:"h1",children:t})]})}),Object(u.jsx)(et.a,{children:Object(u.jsx)(d.a,{color:"secondary",onClick:m,children:b("gotIt")})})]}):Object(u.jsx)(Ze.a,{className:n?j.main:j.side,children:Object(u.jsxs)($e.a,{onClick:function(){return l(!0)},className:j.cardArea,children:[Object(u.jsx)(nt.a,{style:{fontSize:n?"4rem":"2rem"}}),Object(u.jsx)(J.a,{children:b("seeWord")})]})})}var ot=n(183),rt=n(190),it=n(195);function st(){var e=Object(a.useState)(""),t=Object(k.a)(e,2),n=t[0],c=t[1],o=Object(a.useContext)(xt),r=o.onVote,i=o.voteTargets,s=Object(a.useContext)(x).getText;return Object(u.jsx)(Ze.a,{style:{position:"relative",left:"-10%",width:"120%"},children:Object(u.jsxs)(_e.a,{children:[Object(u.jsx)(J.a,{variant:"h5",children:s("pleaseVote")}),Object(u.jsxs)("form",{style:{marginTop:"1rem"},children:[Object(u.jsx)(ot.a,{component:"fieldset",children:Object(u.jsx)(rt.a,{row:!0,"aria-label":"vote",name:"vote",value:n,onChange:function(e){c(e.target.value)},children:i.map((function(e,t){return Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:5},children:[Object(u.jsx)("div",{onClick:function(){c(e)},children:Object(u.jsx)(Ne,{nickname:e,size:"large"})}),Object(u.jsx)(C.a,{value:e,control:Object(u.jsx)(it.a,{color:"primary"}),label:Object(u.jsx)("div",{children:Object(u.jsx)(J.a,{children:e})})})]},t)}))})}),Object(u.jsx)(d.a,{onClick:function(){return r(n)},color:"primary",variant:"contained",style:{marginTop:"1rem"},children:s("submitVote")})]})]})})}var lt=Object(j.a)((function(e){return{root:{width:"100%",position:"absolute",top:"3rem",margin:"0 auto",zIndex:2},cardContent:{display:"flex",justifyContent:"center",alignItems:"center"},instruction:{marginLeft:"1rem"},children:{marginTop:3},killed:{filter:"grayscale(100%)"}}}));function dt(e){var t=e.nickname,n=e.instruction,a=e.children,c=e.killed,o=lt();return Object(u.jsx)(Ze.a,{className:o.root,children:Object(u.jsxs)(_e.a,{className:o.cardContent,children:[t&&Object(u.jsx)(Ne,{size:"medium",nickname:t,className:c&&o.killed||""}),Object(u.jsxs)("div",{className:o.instruction,children:[Object(u.jsx)(J.a,{variant:"h6",children:n}),a&&Object(u.jsx)("div",{className:o.children,children:a})]})]})})}function jt(){var e=Object(a.useContext)(xt),t=e.word,n=e.onTalkFinish,c=e.onWordRead,o=e.instruction,r=e.playersInRoom,i=e.alertLine,l=e.alertType,j=e.changeWord,b=e.nickname,m=e.reportResultReceived,h=e.connected,O=Object(a.useContext)(x),p=O.getCurrentLanguage,g=O.getText,v=Object(a.useState)(Le),y=Object(k.a)(v,2),w=y[0],C=y[1],N=Object(s.f)(),S=Object(s.g)().code;Object(a.useEffect)((function(){var e;C((null===r||void 0===r||null===(e=r.find((function(e){return e.nickname===b})))||void 0===e?void 0:e.state)||Le)}),[r,b]);var R;if(!h)return Object(u.jsx)(f,{children:Object(u.jsx)("div",{children:Object(u.jsx)(dt,{instruction:g("youLookDisconnected"),children:Object(u.jsx)("div",{children:Object(u.jsx)(d.a,{variant:"contained",size:"small",color:"primary",onClick:function(){N.push("/".concat(p()))},children:g("backToHomepage")})})})})});if(w===Be)return Object(u.jsx)(f,{children:Object(u.jsxs)("div",{children:[i&&Object(u.jsx)(Xe,{alertLine:i,type:l}),Object(u.jsx)(ct,{word:t,onRead:c,central:!0}),Object(u.jsx)(d.a,{size:"small",style:{position:"absolute",bottom:"1rem",left:"1rem"},onClick:j,children:g("changeWord")})]})});if(w===De){var T=i&&i.split(" requested")[0]||"Someone";return Object(u.jsx)(f,{children:Object(u.jsxs)("div",{children:[i&&Object(u.jsx)(Xe,{alertLine:i,type:l}),Object(u.jsx)(dt,{nickname:T,instruction:"Picking new words for you ...",children:Object(u.jsx)(Q.a,{})})]})})}return w===Ie?Object(u.jsx)(f,{children:Object(u.jsxs)("div",{children:[i&&Object(u.jsx)(Xe,{alertLine:i,type:l}),Object(u.jsx)(dt,{nickname:b,instruction:"Your turn to talk",children:Object(u.jsx)(d.a,{variant:"contained",size:"small",color:"primary",onClick:function(){n()},children:"I finish"})}),Object(u.jsx)(ct,{word:t,onRead:c,defaultHide:!0})]})}):w===Pe?Object(u.jsx)(f,{children:Object(u.jsxs)("div",{children:[i&&Object(u.jsx)(Xe,{alertLine:i,type:l}),Object(u.jsx)(dt,{nickname:null===r||void 0===r||null===(R=r.find((function(e){return e.state===Ie})))||void 0===R?void 0:R.nickname,instruction:o}),Object(u.jsx)(ct,{word:t,onRead:c,defaultHide:!0})]})}):w===Je?Object(u.jsx)(f,{children:Object(u.jsxs)("div",{children:[i&&Object(u.jsx)(Xe,{alertLine:i,type:l}),Object(u.jsx)(st,{})]})}):w===Fe?Object(u.jsx)(f,{children:Object(u.jsxs)("div",{children:[i&&Object(u.jsx)(Xe,{alertLine:i,type:l}),Object(u.jsx)(dt,{instruction:g("waitingVote"),children:Object(u.jsx)(Q.a,{})})]})}):w===Ae||w===Ee?Object(u.jsx)(f,{children:Object(u.jsxs)("div",{children:[i&&Object(u.jsx)(Xe,{alertLine:i,type:l}),Object(u.jsx)(dt,{instruction:o,children:Object(u.jsxs)("div",{children:[w===Ae&&Object(u.jsxs)(J.a,{variant:"h2",color:"secondary",children:["You lose",Object(u.jsx)(Qe.a,{style:{paddingLeft:"0.5rem"}})]}),w===Ee&&Object(u.jsx)(J.a,{variant:"h2",children:"You win!!"}),Object(u.jsx)(d.a,{onClick:function(){m(),N.push("/".concat(p(),"/room/").concat(S))},variant:"contained",size:"small",color:"primary",children:"OK"})]})})]})}):w===We?Object(u.jsx)(f,{children:Object(u.jsxs)("div",{children:[i&&Object(u.jsx)(Xe,{alertLine:i,type:l}),Object(u.jsx)(Ye,{})]})}):Object(u.jsx)(f,{children:Object(u.jsxs)("div",{children:[i&&Object(u.jsx)(Xe,{alertLine:i,type:l}),Object(u.jsx)(dt,{instruction:o||"Unexpected state ".concat(w),children:Object(u.jsx)(d.a,{variant:"contained",size:"small",color:"primary",onClick:function(){N.push("/".concat(p()))},children:g("backToHomepage")})})]})})}var ut=Object(j.a)((function(e){var t;return{modalBody:(t={padding:e.spacing(2,4,3)},Object(I.a)(t,e.breakpoints.up("sm"),{width:"320px",height:"150px",margin:"100px auto"}),Object(I.a)(t,e.breakpoints.down("sm"),{width:"240px",height:"150px",margin:"150px auto"}),t),modalButton:{marginLeft:"200px"},marginBottom:{marginBottom:"1rem"},marginTop:{marginTop:"1rem"}}})),bt="idle-state",mt="game-on";function ht(){var e,t,n,c=Object(a.useContext)(xt),o=c.nickname,r=c.setNickname,i=c.onDisconnectFromRoom,l=c.alertLine,j=c.alertType,b=c.joinFailedMessage,m=c.roomState,h=c.setJoinFailedMessage,O=c.roomCapacity,p=c.playersInRoom,g=c.getReady,v=c.undoReady,y=Object(a.useContext)(x),k=y.getText,w=y.getCurrentLanguage,C=Object(s.g)().code,N=Object(s.g)().state,S=ut(),R=Object(s.f)(),T=function(){h&&h(""),r("")};return"play"===N?Object(u.jsx)(jt,{}):o?m===mt?(setTimeout((function(){R.push("/".concat(w(),"/room/").concat(C,"/play"))}),3e3),Object(u.jsx)(f,{allowExit:!0,onExit:i,children:Object(u.jsxs)("div",{children:[Object(u.jsx)(Q.a,{size:"5rem",className:S.marginBottom}),Object(u.jsx)(J.a,{variant:"h5",className:S.marginTop,children:k("gameStarting")})]})})):(null===p||void 0===p||null===(e=p.find((function(e){return e.nickname===o})))||void 0===e?void 0:e.state)===Ee?Object(u.jsx)(f,{children:Object(u.jsx)(dt,{nickname:o,instruction:"Well done :)"})}):(null===p||void 0===p||null===(t=p.find((function(e){return e.nickname===o})))||void 0===t?void 0:t.state)===Ae?Object(u.jsx)(f,{children:Object(u.jsx)(dt,{nickname:o,instruction:"Better luck next time"})}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(ve.a,{open:""!==b,onClose:T,"aria-labelledby":"join-room-failed","aria-describedby":"join-room-failed",children:Object(u.jsxs)(ye.a,{className:S.modalBody,children:[Object(u.jsx)("h2",{children:k("failJoinRoom")}),Object(u.jsx)("p",{children:b}),Object(u.jsx)(d.a,{onClick:T,className:S.modalButton,children:k("ok")})]})}),Object(u.jsx)(f,{allowExit:!0,onExit:i,children:Object(u.jsxs)("div",{children:[l&&Object(u.jsx)(Xe,{alertLine:l,type:j}),Object(u.jsx)(J.a,{variant:"h4",className:S.marginBottom,children:k("room",C)}),Object(u.jsx)(Ye,{}),p&&O&&O===(null===p||void 0===p?void 0:p.length)&&((null===(n=p.find((function(e){return e.nickname===o})))||void 0===n?void 0:n.state)===ze?Object(u.jsx)(d.a,{size:"large",variant:"contained",color:"secondary",className:S.marginTop,onClick:v,children:k("notReady")}):Object(u.jsx)(d.a,{size:"large",variant:"contained",color:"secondary",className:S.marginTop,onClick:g,children:k("imReady")}))]})})]}):Object(u.jsx)(f,{allowExit:!0,children:Object(u.jsx)(Re,{})})}var Ot=n(100),xt=c.a.createContext(void 0);function pt(e){var t=e.children,n=Object(a.useContext)(x).getText,c=Object(s.g)().code,o=Object(a.useState)(void 0),r=Object(k.a)(o,2),i=r[0],l=r[1],d=Object(a.useState)(""),j=Object(k.a)(d,2),b=j[0],m=j[1],h=Object(a.useState)(!1),O=Object(k.a)(h,2),p=O[0],g=O[1],f=Object(a.useState)(""),v=Object(k.a)(f,2),y=v[0],w=v[1],C=Object(a.useState)(),N=Object(k.a)(C,2),S=N[0],R=N[1],T=Object(a.useState)(""),L=Object(k.a)(T,2),z=L[0],B=L[1],P=Object(a.useState)(0),I=Object(k.a)(P,2),J=I[0],W=I[1],E=Object(a.useState)(""),A=Object(k.a)(E,2),F=A[0],D=A[1],V=Object(a.useState)(""),H=Object(k.a)(V,2),M=H[0],K=H[1],X=Object(a.useState)(!1),U=Object(k.a)(X,2),Q=U[0],Z=U[1],$=Object(a.useState)(),_=Object(k.a)($,2),ee=_[0],te=_[1],ne=Object(a.useState)(bt),ae=Object(k.a)(ne,2),ce=ae[0],oe=ae[1],re=Object(a.useState)("success"),ve=Object(k.a)(re,2),ye=ve[0],ke=ve[1],we=Object(a.useRef)(null),Ce=Object(a.useCallback)((function(e){if(e.instruction&&K(n(e.instruction,e.arg)),e.alert&&(e.alertType&&ke(e.alertType),w(n(e.alert,e.arg)),setTimeout((function(){return w("")}),2500)),e.action===le){var t=JSON.parse(e.payload);R(t)}e.action!==se&&e.action!==ie||R(JSON.parse(e.payload)),e.action===je&&oe(mt),e.action===de&&(D(e.payload),Z(!1)),e.action===ue&&te(JSON.parse(e.payload))}),[n]),Ne=Object(a.useCallback)((function(){var e;null===we||void 0===we||null===(e=we.current)||void 0===e||e.send(JSON.stringify({action:fe,senderNickname:b,roomCode:c,payload:""}))}),[we,b,c]),Se=Object(a.useCallback)((function(){var e;ce===mt&&(b&&localStorage.setItem("nickname",b),c&&localStorage.setItem("roomCode",c)),null===we||void 0===we||null===(e=we.current)||void 0===e||e.send(JSON.stringify({action:Oe,senderNickname:b,roomCode:c,payload:""}))}),[we,b,c,ce]),Re=Object(a.useCallback)((function(e){var t;null===we||void 0===we||null===(t=we.current)||void 0===t||t.send(JSON.stringify({action:me,senderNickname:b,roomCode:c,payload:e}))}),[we,b,c]),Te=Object(a.useCallback)((function(){var e;null===we||void 0===we||null===(e=we.current)||void 0===e||e.send(JSON.stringify({action:be,senderNickname:b,roomCode:c,payload:""}))}),[we,b,c]),Le=Object(a.useCallback)((function(){var e;Q||(Z(!0),null===we||void 0===we||null===(e=we.current)||void 0===e||e.send(JSON.stringify({action:pe,senderNickname:b,roomCode:c,payload:""})))}),[we,b,c,Q]),ze=Object(a.useCallback)((function(){var e;null===we||void 0===we||null===(e=we.current)||void 0===e||e.send(JSON.stringify({action:he,senderNickname:b,roomCode:c,payload:""}))}),[we,b,c]),Be=Object(a.useCallback)(Object(Y.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===we||void 0===we||null===(t=we.current)||void 0===t||t.send(JSON.stringify({action:xe,senderNickname:b,roomCode:c,payload:""}));case 1:case"end":return e.stop()}}),e)}))),[we,b,c]),Pe=Object(a.useCallback)(Object(Y.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oe(bt),D(""),null===we||void 0===we||null===(t=we.current)||void 0===t||t.send(JSON.stringify({action:ge,senderNickname:b,roomCode:c,payload:""}));case 3:case"end":return e.stop()}}),e)}))),[we,b,c]);return Object(a.useEffect)((function(){b&&c&&!p&&q({path:"ayt?nickname=".concat(b,"&roomcode=").concat(c)}).then((function(e){e.line?B(e.line):(e.numPlayer&&W(e.numPlayer),we.current=new Ot.a("ws://".concat("34.221.65.76:8080","/ws?nickname=").concat(b,"&roomcode=").concat(c)),we.current.onopen=function(){console.log("connected"),g(!0)},we.current.onmessage=function(e){Ce(JSON.parse(e.data))},we.current.onclose=function(){Se(),console.log("disconnected")})}))}),[Se,Ce,c,b,we,p]),Object(u.jsx)(xt.Provider,{value:{id:i,setId:l,nickname:b,setNickname:m,onDisconnectFromRoom:Se,playersInRoom:S,alertLine:y,joinFailedMessage:z,setJoinFailedMessage:B,roomCapacity:J,getReady:ze,undoReady:Be,roomState:ce,setRoomState:oe,word:F,onVote:Re,onTalkFinish:Te,onWordRead:Le,instruction:M,voteTargets:ee,reportResultReceived:Pe,alertType:ye,changeWord:Ne,connected:p},children:t})}function gt(){var e=Object(s.h)();return Object(u.jsxs)(s.c,{children:[Object(u.jsx)(s.a,{path:"".concat(e.path,"/new-room"),children:Object(u.jsx)(X,{})}),Object(u.jsx)(s.a,{path:"".concat(e.path,"/join-room"),children:Object(u.jsx)($,{})}),Object(u.jsx)(s.a,{path:"".concat(e.path,"/contribute"),children:Object(u.jsx)(_,{})}),Object(u.jsx)(s.a,{path:"".concat(e.path,"/room/:code/:state?"),children:Object(u.jsx)(pt,{children:Object(u.jsx)(ht,{})})}),Object(u.jsx)(s.a,{path:e.path,children:Object(u.jsx)(re,{})})]})}var ft=n(101),vt=n(191);var yt=function(){var e=Object(ft.a)({palette:{type:"dark"}});return Object(u.jsx)(vt.a,{theme:e,children:Object(u.jsx)(i.a,{children:Object(u.jsxs)(s.c,{children:[Object(u.jsx)(s.a,{path:"/en",children:Object(u.jsx)(p,{language:"en",children:Object(u.jsx)(gt,{})})}),Object(u.jsx)(s.a,{path:"/cn",children:Object(u.jsx)(p,{language:"cn",children:Object(u.jsx)(gt,{})})}),Object(u.jsx)(s.a,{path:"/",children:Object(u.jsx)(v,{})})]})})})};r.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(yt,{})}),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.82628c7a.chunk.js.map